<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>JDBC 기초 정리 (Oracle 중심)</title>
    <link rel="stylesheet" href="/src/css/study.css">

</head>
<body>
<h1>JDBC 기초 정리</h1>

<section>
    <h2>1. JDBC란?</h2>
    <ul>
        <li>JDBC(Java Database Connectivity)는 자바에서 데이터베이스에 접속하고 SQL을 실행해 결과를 다루기 위한 표준 API이다.</li>
        <li>JDBC는 표준 인터페이스를 제공하고, 각 DB 벤더(Oracle, MySQL 등)가 JDBC 드라이버로 실제 구현을 제공한다.</li>
        <li>자바 코드는 JDBC 표준을 사용하고, 드라이버가 DB와의 통신을 담당한다.</li>
    </ul>
</section>

<section>
    <h2>2. JDBC 동작 흐름</h2>
    <ul>
        <li>드라이버 로드
            <ul>
                <li>JDBC 4.0 이상: 드라이버 자동 인식으로 보통 생략 가능</li>
                <li>구형 방식 참고: <code>Class.forName("oracle.jdbc.OracleDriver");</code></li>
            </ul>
        </li>
        <li>연결 생성
            <ul>
                <li><code>Connection conn = DriverManager.getConnection(url, user, pass);</code></li>
            </ul>
        </li>
        <li>SQL 실행
            <ul>
                <li><code>Statement</code> 또는 <code>PreparedStatement</code>로 SQL 실행</li>
                <li>조회: <code>executeQuery()</code> → <code>ResultSet</code> 반환</li>
                <li>등록/수정/삭제: <code>executeUpdate()</code> → 영향 행 수 반환</li>
            </ul>
        </li>
        <li>결과 처리
            <ul>
                <li><code>ResultSet</code>에서 컬럼 값을 타입에 맞게 추출 (<code>getInt</code>, <code>getString</code> 등)</li>
            </ul>
        </li>
        <li>자원 해제
            <ul>
                <li><code>ResultSet</code>, <code>Statement</code>, <code>Connection</code>을 닫는다.</li>
                <li>권장: try-with-resources로 자동 해제</li>
            </ul>
        </li>
    </ul>
</section>

<section>
    <h2>3. Oracle 접속 URL 정리(Thin 드라이버)</h2>
    <ul>
        <li>서비스명 기반
            <ul>
                <li>형식: <code>jdbc:oracle:thin:@//호스트:1521/서비스명</code></li>
                <li>예: <code>jdbc:oracle:thin:@//localhost:1521/XEPDB1</code></li>
            </ul>
        </li>
        <li>SID 기반
            <ul>
                <li>형식: <code>jdbc:oracle:thin:@호스트:1521:SID</code></li>
                <li>예: <code>jdbc:oracle:thin:@localhost:1521:XE</code></li>
            </ul>
        </li>
        <li>문제 발생 시 점검
            <ul>
                <li>호스트, 포트(기본 1521), 서비스명 또는 SID 확인</li>
                <li>서버 측 리스너 상태 점검(관리자): <code>lsnrctl status</code></li>
            </ul>
        </li>
    </ul>
</section>

<section>
    <h2>4. 예제 코드(Oracle 접속 및 조회)</h2>
    <pre><code>import java.sql.*;

public class JdbcExample {
    public static void main(String[] args) {
        String url  = "jdbc:oracle:thin:@//localhost:1521/XEPDB1"; // 또는 SID: jdbc:oracle:thin:@localhost:1521:XE
        String user = "scott";
        String pass = "tiger";

        String sql = "SELECT EMPNO, ENAME, DEPTNO FROM EMP WHERE DEPTNO = ?";

        try (Connection conn = DriverManager.getConnection(url, user, pass);
             PreparedStatement ps = conn.prepareStatement(sql)) {

            ps.setInt(1, 10); // 바인딩

            try (ResultSet rs = ps.executeQuery()) {
                while (rs.next()) {
                    int empno  = rs.getInt("EMPNO");
                    String en  = rs.getString("ENAME");
                    int deptno = rs.getInt("DEPTNO");
                    System.out.println(empno + " | " + en + " | " + deptno);
                }
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code></pre>
    <ul>
        <li><code>PreparedStatement</code>는 파라미터 바인딩으로 SQL 인젝션 위험을 줄이고 캐시로 성능에 유리하다.</li>
        <li>try-with-resources 구문으로 연결과 자원을 자동 반납한다.</li>
    </ul>
</section>

<section>
    <h2>5. 주요 클래스 요약</h2>
    <ul>
        <li>DriverManager: 드라이버 관리 및 Connection 생성</li>
        <li>Connection: DB 연결, 트랜잭션 제어(<code>setAutoCommit</code>, <code>commit</code>, <code>rollback</code>)</li>
        <li>Statement / PreparedStatement: SQL 실행 객체</li>
        <li>ResultSet: SELECT 결과 집합을 행 단위로 순회</li>
    </ul>
</section>

<section>
    <h2>6. 자주 발생하는 오류와 원인</h2>
    <ul>
        <li>ClassNotFoundException: oracle.jdbc.OracleDriver
            <ul>
                <li>드라이버 라이브러리 누락. 드라이버 추가 또는 의존성 설정 확인</li>
            </ul>
        </li>
        <li>ORA-01017: invalid username/password
            <ul>
                <li>계정/비밀번호 오류. 사용자 정보 확인</li>
            </ul>
        </li>
        <li>ORA-12514 / ORA-12541
            <ul>
                <li>리스너/서비스명 등록 문제. 서비스명, 리스너 상태 확인</li>
            </ul>
        </li>
        <li>SQLRecoverableException: IO Error
            <ul>
                <li>네트워크/포트/방화벽 문제 또는 URL 오타</li>
            </ul>
        </li>
    </ul>
</section>
</body>
</html>