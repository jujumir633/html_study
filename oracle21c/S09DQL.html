<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>DQL과 다양한 질의방법</title>
    <link rel="stylesheet" href="/src/css/study.css">

</head>
<body>
    <h1>DQL과 다양한 질의방법</h1>
    <section>
        <h2>DQL 개요</h2>
        <ul>
            <li>DQL(Data Query Language)은 데이터를 <strong>조회</strong>하기 위한 언어</li>
            <li>핵심 구문: <code>SELECT</code></li>
            <li>이번 수업: <strong>WHERE 조건(동등·비교·IN·LIKE·IS NULL·논리)</strong> + <strong>형변환</strong></li>
        </ul>
    </section>

    <section>
        <h2>SELECT 기본</h2>
        <pre><code>-- 특정 컬럼
SELECT id, name
FROM member;

-- 전체 컬럼
SELECT *
FROM member;</code></pre>
    </section>

    <section>
        <h2>WHERE 조건 (동등 · 비교 · IN · LIKE · IS NULL · 논리)</h2>

        <h3>동등(=) / 비교(&gt;, &lt;, &gt;=, &lt;=, &lt;&gt;)</h3>
        <pre><code>SELECT id, name
FROM member
WHERE name = '홍길동';

SELECT id, salary
FROM employee
WHERE salary &gt;= 3000;</code></pre>

        <h3>IN / NOT IN</h3>
        <ul>
            <li>여러 값 중 하나와 일치</li>
            <li><strong>주의:</strong> NOT IN 리스트에 <code>NULL</code>이 섞이면 결과가 비워질 수 있음</li>
        </ul>
        <pre><code>SELECT id, grade
FROM member
WHERE grade IN ('일반','VIP');</code></pre>

        <h3>LIKE (패턴 검색)</h3>
        <ul>
            <li><code>%</code>: 0글자 이상 임의 문자열 / <code>_</code>: 임의의 한 글자</li>
            <li>대/소문자 구분 → 필요 시 <code>UPPER/LOWER</code>로 통일</li>
            <li>특수기호 검색 시 <code>ESCAPE</code></li>
        </ul>
        <pre><code>-- 시작이 '김'
SELECT * FROM member WHERE name LIKE '김%';

-- '길' 포함
SELECT * FROM member WHERE name LIKE '%길%';

-- 정확히 3글자
SELECT * FROM member WHERE name LIKE '___';

-- 특수기호 % 자체 검색
SELECT * FROM promo WHERE title LIKE '90\% 할인' ESCAPE '\';

-- 대/소문자 무시 검색
SELECT * FROM user_tbl
WHERE UPPER(email) LIKE UPPER('%@GMAIL.COM');</code></pre>

        <h3>IS NULL / IS NOT NULL</h3>
        <ul>
            <li><code>= NULL</code> 금지 → <code>IS NULL</code> / <code>IS NOT NULL</code> 사용</li>
        </ul>
        <pre><code>SELECT id FROM member WHERE email IS NULL;
SELECT id FROM member WHERE email IS NOT NULL;</code></pre>

        <h3>논리 연산자 (AND, OR, NOT)</h3>
        <ul>
            <li>우선순위: <code>AND</code> &gt; <code>OR</code> (헷갈리면 괄호)</li>
        </ul>
        <pre><code>SELECT *
FROM member
WHERE grade = 'VIP'
  AND (reg_date &gt;= DATE '2025-01-01' OR name = '홍길동');</code></pre>
    </section>
    <section>
        <h2>숫자 포맷 기호</h2>
        <ul>
            <li><strong>9</strong> : 자리 표시 (숫자가 없으면 공백)</li>
            <li><strong>0</strong> : 자리 표시 (숫자가 없으면 0으로 채움)</li>
            <li><strong>, (쉼표) / G</strong> : 그룹 구분자 (천 단위, 로케일 따라 다름)</li>
            <li><strong>D</strong> : 소수점</li>
            <li><strong>FM</strong> : Fill Mode, 출력 공백 제거</li>
            <li><strong>L</strong> : 통화 기호(로케일 적용)</li>
            <li><strong>%</strong> : 퍼센트 표시</li>
        </ul>
        <pre><code>-- 문자열 → 숫자
SELECT TO_NUMBER('1,234','9G999') + 1 AS n FROM dual;
-- 결과: 1235

-- 숫자 → 문자열
SELECT TO_CHAR(12345.6, 'FM9,999,990.00') FROM dual;
-- 결과: '12,345.60'

-- 0 채우기
SELECT TO_CHAR(7, '0000') FROM dual;
-- 결과: '0007'

-- 통화 기호
SELECT TO_CHAR(12345, 'L9,999') FROM dual;
-- 결과: '₩12,345' (한국 로케일일 때)</code></pre>
    </section>

    <section>
        <h2>날짜/시간 포맷 기호</h2>
        <ul>
            <li><strong>YYYY</strong> : 4자리 연도</li>
            <li><strong>YY</strong> : 2자리 연도</li>
            <li><strong>MM</strong> : 월(01~12)</li>
            <li><strong>MON</strong> : 월 약어 (JAN, FEB …)</li>
            <li><strong>MONTH</strong> : 월 전체 이름</li>
            <li><strong>DD</strong> : 일(01~31)</li>
            <li><strong>DY</strong> : 요일 약어 (MON, TUE …)</li>
            <li><strong>DAY</strong> : 요일 전체 이름</li>
            <li><strong>HH24</strong> : 24시간</li>
            <li><strong>HH12</strong> : 12시간</li>
            <li><strong>MI</strong> : 분</li>
            <li><strong>SS</strong> : 초</li>
            <li><strong>FF</strong> : 소수 초 (마이크로~나노초)</li>
            <li><strong>TZH:TZM</strong> : 타임존 (시/분)</li>
        </ul>
        <pre><code>-- 현재 날짜를 문자열로
SELECT TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') FROM dual;
-- 결과: '2025-09-23 14:32:10'

-- 문자열을 DATE로
SELECT TO_DATE('2025-09-23','YYYY-MM-DD') FROM dual;

-- TIMESTAMP 변환
SELECT TO_TIMESTAMP('2025-09-23 14:30:00.123456',
                    'YYYY-MM-DD HH24:MI:SS.FF6')
FROM dual;

-- 타임존 포함
SELECT TO_TIMESTAMP_TZ('2025-09-23 14:30:00 +09:00',
                       'YYYY-MM-DD HH24:MI:SS TZH:TZM')
FROM dual;</code></pre>
    </section>
    <section>
        <h2>SCOTT 스키마 SQL 질의 문제 (15)</h2>
        <p>대상 테이블: <code>SCOTT.EMP</code>, <code>SCOTT.DEPT</code>, <code>SCOTT.SALGRADE</code>, <code>SCOTT.PAY_HISTORY</code></p>
        <ol>
            <li><strong>EMP</strong> 테이블에서 모든 사원의 정보를 조회하시오.</li>
            <li><strong>EMP</strong> 테이블에서 사원 이름(<code>ENAME</code>)과 급여(<code>SAL</code>)만 조회하시오.</li>
            <li><strong>EMP</strong> 테이블에서 부서 번호(<code>DEPTNO</code>)가 10인 사원의 이름과 직무를 조회하시오.</li>
            <li><strong>EMP</strong> 테이블에서 급여가 2000 이상인 사원의 이름과 급여를 조회하시오.</li>
            <li><strong>EMP</strong> 테이블에서 직무(<code>JOB</code>)가 'CLERK'인 사원의 모든 정보를 조회하시오.</li>
            <li><strong>EMP</strong> 테이블에서 이름이 'S'로 시작하는 사원의 이름과 부서 번호를 조회하시오. (<code>LIKE 'S%'</code>)</li>
            <li><strong>EMP</strong> 테이블에서 이름이 'T'로 끝나는 사원의 이름과 직무를 조회하시오. (<code>LIKE '%T'</code>)</li>
            <li><strong>EMP</strong> 테이블에서 커미션(<code>COMM</code>)이 <code>NULL</code>인 사원의 이름과 급여를 조회하시오. (<code>IS NULL</code>)</li>
            <li><strong>EMP</strong> 테이블에서 매니저(<code>MGR</code>)가 없는 사원의 이름과 직무를 조회하시오. (<code>MGR IS NULL</code>)</li>
            <li><strong>EMP</strong> 테이블에서 급여(<code>SAL</code>)가 1500 이상 3000 이하인 사원의 이름과 급여를 조회하시오. (<code>BETWEEN</code> 사용 가능)</li>
            <li><strong>EMP</strong> 테이블에서 1981년에 입사한(<code>HIREDATE</code>) 사원의 이름과 입사일을 조회하시오. (연도 조건)</li>
            <li><strong>DEPT</strong> 테이블에서 모든 부서의 이름(<code>DNAME</code>)과 지역(<code>LOC</code>)을 조회하시오.</li>
            <li><strong>EMP</strong> 테이블에서 부서 번호가 20번 또는 30번인 사원의 이름과 부서 번호를 조회하시오. (<code>IN (20,30)</code>)</li>
            <li><strong>EMP</strong> 테이블에서 보너스(<code>COMM</code>)가 0보다 큰 사원의 이름, 급여, 보너스를 조회하시오. (<code>COMM &gt; 0</code>)</li>
            <li><strong>EMP</strong> 테이블에서 직무(<code>JOB</code>)가 'MANAGER'인 사원의 이름, 부서 번호, 입사일을 조회하시오.</li>
        </ol>
    </section>
    <section>
        <h2>SCOTT 스키마 SQL 정답 (15)</h2>
        <ol>
            <li>
                <pre><code>SELECT * FROM scott.emp;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, sal
FROM scott.emp;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, job
FROM scott.emp
WHERE deptno = 10;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, sal
FROM scott.emp
WHERE sal &gt;= 2000;</code></pre>
            </li>
            <li>
      <pre><code>SELECT *
FROM scott.emp
WHERE job = 'CLERK';</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, deptno
FROM scott.emp
WHERE ename LIKE 'S%';</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, job
FROM scott.emp
WHERE ename LIKE '%T';</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, sal
FROM scott.emp
WHERE comm IS NULL;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, job
FROM scott.emp
WHERE mgr IS NULL;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, sal
FROM scott.emp
WHERE sal BETWEEN 1500 AND 3000;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, hiredate
FROM scott.emp
WHERE hiredate BETWEEN DATE '1981-01-01' AND DATE '1981-12-31';</code></pre>
            </li>
            <li>
      <pre><code>SELECT dname, loc
FROM scott.dept;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, deptno
FROM scott.emp
WHERE deptno IN (20, 30);</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, sal, comm
FROM scott.emp
WHERE comm &gt; 0;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, deptno, hiredate
FROM scott.emp
WHERE job = 'MANAGER';</code></pre>
            </li>

        </ol>
    </section>
    <section>
        <h2>형변환 SQL 문제 (5)</h2>
        <ol>
            <li>EMP 테이블에서 모든 사원의 입사일(HIREDATE)을 YYYY-MM-DD 형식의 문자열로 변환하여 조회하시오.</li>
            <li>문자열 '2025-01-15'를 DATE 형식으로 변환하여 조회하시오.</li>
            <li>EMP 테이블에서 급여(SAL)를 통화 형식(9,999) 문자열로 변환하여 조회하시오.</li>
            <li>문자열 '1,234'를 숫자로 변환한 후 10을 더한 결과를 조회하시오.</li>
            <li>EMP 테이블에서 급여(SAL)를 VARCHAR2로 캐스팅하여 문자열로 조회하시오.</li>
        </ol>
    </section>

    <section>
        <h2>형변환 SQL 정답 (5)</h2>
        <ol>
            <li>
      <pre><code>SELECT ename, TO_CHAR(hiredate, 'YYYY-MM-DD') AS hire_str
FROM scott.emp;</code></pre>
            </li>
            <li>
      <pre><code>SELECT TO_DATE('2025-01-15','YYYY-MM-DD') AS converted_date
FROM dual;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, TO_CHAR(sal, '9,999') AS sal_fmt
FROM scott.emp;</code></pre>
            </li>
            <li>
      <pre><code>SELECT TO_NUMBER('1,234','9,999') + 10 AS num_result
FROM dual;</code></pre>
            </li>
            <li>
      <pre><code>SELECT ename, CAST(sal AS VARCHAR2(10)) AS sal_str
FROM scott.emp;</code></pre>
            </li>
        </ol>
    </section>
</body>
</html>